"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5188],{3490:(e,r,t)=>{t.d(r,{N:()=>a});var i=t(50467),n=t(27813);class a{setBreakpoint(e){this.breakpoints.push({lineNumber:e});for(const r of this.debuggers)r.setBreakpoint(e)}removeBreakpoint(e){this.breakpoints=this.breakpoints.filter((r=>r.lineNumber!==e));for(const r of this.debuggers)r.removeBreakpoint(e)}setActiveLine(e){this.activeLine=e}addDebugger(e){return this.debuggers.add(e),()=>this.debuggers.delete(e)}constructor(){(0,i._)(this,"activeLine",0),(0,i._)(this,"breakpoints",[]),(0,i._)(this,"debuggers",new Set),(0,n.l_)(this)}}},35188:(e,r,t)=>{t.d(r,{MM:()=>D,Q1:()=>C,_j:()=>S});var i=t(1399),n=t.n(i),a=t(50346);var s=t(14500),o=t(22492),d=t(49549),l=t(72909),u=t(17845),h=t(9940);function c(e){return""!==e?parseInt(e,8):0}var m=t(52212),g=t(3490),f=t(50467),p=t(49733),y=t(67319);class b{createLibraryFile(){const{project:e}=this,r=e.findFile(o.mx);if(r)return r;const t=e.files.filter((e=>"sketch"===(0,o.$A)(e.name))).flatMap((e=>(0,p.Vr)(e.content))).map((e=>y.r[e])).filter((e=>e)),i=["# Wokwi Library List","# See https://docs.wokwi.com/guides/libraries",""];let n=!1;for(const e of t)n||(i.push("# Automatically added based on includes:"),n=!0),i.push(e);return n&&i.push(""),e.addFile(o.mx,i.join("\n")+"\n")}addLibrary(e){const r=this.createLibraryFile(),t=r.content.split("\n");if(t.map((e=>e.trim())).includes(e))return;const i=e.split("@")[0];let n=t.filter((e=>e.trim().split("@")[0]!==i)).join("\n");n.endsWith("\n")||(n+="\n"),n+=e+"\n",r.update(n)}removeLibrary(e){const r=this.createLibraryFile(),t=r.content.split("\n").filter((r=>r.trim().split("@")[0]!==e)).join("\n");r.update(t)}constructor(e){(0,f._)(this,"project",void 0),this.project=e}}const v=a.gK.model({name:a.gK.string,size:a.gK.number,serverId:a.gK.maybe(a.gK.string)}).volatile((()=>({buffer:null,progress:0,modified:!1,uploading:!1,downloading:!1,uploadFailed:!1,abort:new AbortController}))).views((e=>({get transferring(){return e.uploading||e.downloading}}))).actions((e=>({updateProgress(r){e.progress=r},completeUpload(r){e.uploading=!1,r?e.serverId=r:(e.uploadFailed=!0,e.modified=!1)},setBuffer(r){e.buffer=null!=r?r:null,e.downloading=!1},setPristine(){e.modified=!1}}))).actions((e=>({async upload(r,t){if(!e.serverId&&!e.uploading){(0,u._N)(t).then((r=>e.setBuffer(r))),e.uploading=!0,e.modified=!0;try{const i=await(0,d.QM)(r,t,{abortSignal:e.abort.signal,onProgress:r=>e.updateProgress(r.loaded/r.total)});e.completeUpload(i.fileId)}catch(r){console.error(r),e.completeUpload()}}},async afterCreate(){if(e.serverId){e.downloading=!0;try{const r=await(0,d.PE)(e.serverId,{abortSignal:e.abort.signal,onProgress:r=>e.updateProgress(r.loaded/e.size)});e.setBuffer(r)}catch(r){console.error(r),e.setBuffer()}}},beforeDestroy(){e.abort.abort()}}))),S="sdcard/",C=a.gK.model({name:a.gK.string,content:a.gK.string}).volatile((e=>({originalName:e.name,originalContent:e.content,deleted:!1,editorState:null,errors:[],debugger:new g.N}))).views((e=>({get type(){return(0,o.$A)(e.name)},get modified(){return e.content!==e.originalContent||e.originalName!==e.name}}))).actions((e=>({update(r){e.content=r},rename(r){e.name=r},setPristine(){e.originalContent=e.content,e.originalName=e.name},setEditorState(r){e.editorState=r}}))),D=a.gK.model({name:a.gK.optional(a.gK.string,""),id:a.gK.maybe(a.gK.string),parentId:a.gK.maybe(a.gK.string),files:a.gK.array(C),serverFiles:a.gK.array(v),owner:a.gK.maybe(a.gK.string),ownerUsername:a.gK.maybe(a.gK.string),locked:a.gK.maybe(a.gK.boolean),unlisted:a.gK.optional(a.gK.boolean,!1),updated:a.gK.maybe(a.gK.Date),hearts:a.gK.optional(a.gK.number,0),userLiked:a.gK.optional(a.gK.boolean,!1),language:a.gK.maybe(a.gK.enumeration(["arduino","python","rust","other"]))}).volatile((e=>({binaryFiles:[],filesDeleted:!1,chips:[],libraryManager:new b(e),diagramInstance:m.yF.create(),lastDiagramContent:"",tempId:"temp-".concat(Math.random().toString(36).substring(2))}))).views((e=>({get diagram(){const r=e.files.find((e=>"diagram"===e.type));if(!r)return null;if((null==r?void 0:r.content)!==e.lastDiagramContent)try{var t;(0,a.Nh)(e.diagramInstance,JSON.parse(null!==(t=null==r?void 0:r.content)&&void 0!==t?t:"null")),e.lastDiagramContent||e.diagramInstance.undoManager.reset()}catch(e){return console.warn("Failed to parse diagram",e),null}return e.diagramInstance},get readme(){return e.files.find((e=>"readme"===e.type))},get modified(){return e.files.some((e=>e.modified))||e.serverFiles.some((e=>e.modified))||e.filesDeleted},findFile:r=>e.files.find((e=>e.name===r)),get isDBProject(){return e.id&&/^[0-9]+$/.test(e.id)},get url(){return e.id?(0,o.Vn)(e.id):null},get sdCardFiles(){return e.serverFiles.filter((e=>e.name.startsWith(S)))}}))).views((e=>({chipExists(r){var t;return e.chips.some((e=>e.name===r))||e.files.some((e=>e.name==="".concat(r,".chip.json")))||void 0!==(null===(t=e.diagram)||void 0===t?void 0:t.dependencies.get("chip-".concat(r,")")))},get architecture(){var r,t,i;const n=null===(t=e.diagram)||void 0===t||null===(r=t.board)||void 0===r?void 0:r.mcuType;return n&&(null===(i=l.z[n])||void 0===i?void 0:i.arch)},get projectType(){var r,t,i,n;const a=null===(t=e.diagram)||void 0===t||null===(r=t.findMCU())||void 0===r?void 0:r.attrs.get("env"),s=null===(n=e.diagram)||void 0===n||null===(i=n.findMCU())||void 0===i?void 0:i.attrs.get("builder");return(null==a?void 0:a.startsWith("micropython"))?"micropython":(null==a?void 0:a.startsWith("circuitpython"))?"circuitpython":(null==s?void 0:s.includes("rust"))?"rust":(null==s?void 0:s.includes("sdk"))||(null==a?void 0:a.includes("zephyr"))?"sdk":"arduino"}}))).actions((e=>({addFile(r){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const n=e.files.find((e=>e.name===r));if(n){if(i)return n.update(t),n;throw new Error("File ".concat(r," already exists in project"))}const a=e.files.push({name:r,content:t,modified:!0});return e.files[a-1]},addBinaryFile(r,t){e.binaryFiles.push({name:r,content:t})},updateFile(r,t){const i=e.files.find((e=>e.name===r));null==i||i.update(t)},renameFile(r,t){var i;null===(i=e.findFile(r))||void 0===i||i.rename(t),r.endsWith(".ino")&&r===e.name&&(e.name=t)},removeFile(r){const t=e.findFile(r);t&&(t.deleted=!0,e.files.remove(t),e.filesDeleted=!0)},uploadFile(r,t){const i=(arguments.length>2&&void 0!==arguments[2]?arguments[2]:"")+(0,u.oK)(t),n=e.serverFiles.find((e=>e.name===i));n&&(0,a.zr)(n);const s=v.create({name:i,size:t.size});s.upload(r,t),e.serverFiles.push(s)},removeServerFile(e){(0,a.zr)(e)},setName(r){e.name=r},changeId(r){e.id=r},changeOwner(r){e.owner!==r&&(e.ownerUsername=void 0,e.owner=r)},setPristine(){e.files.forEach((e=>e.setPristine())),e.serverFiles.forEach((e=>e.setPristine())),e.filesDeleted=!1},setLocked(r){e.locked=r},setUnlisted(r){e.unlisted=r},updateHearts(r){e.hearts=r},updateUserLike(r){e.userLiked=r},setChips(r){e.chips=r},setGCCErrors(r,t){for(const r of e.files)r.errors=[];const{errors:i,remainingOutput:n}=(0,s.V_)(r),a=e.files[0];for(const r of Object.keys(i)){const t=e.files.find((e=>e.name===r));t?t.errors=i[r]:a.errors.push(...i[r])}(r=(0,s.gH)(n)).length>0&&!t&&a.errors.push({type:"error",startLineNumber:1,endLineNumber:1,endColumn:1,startColumn:1,message:r})},syncDiagram(){const{diagram:r}=e;var t;r&&(e.lastDiagramContent=n()(function(e){return{...e,parts:(e.parts||[]).map((e=>{const r={...e};return r.hide||delete r.hide,r.rotate||delete r.rotate,r}))}}((0,a.dV)(r)),null,2,100),null===(t=e.findFile("diagram.json"))||void 0===t||t.update(e.lastDiagramContent));return e.diagram}}))).actions((e=>({async updateFromServer(r){if(!e.id)return;const{userLiked:t}=await(0,d.Kh)(r,e.id);e.updateUserLike(t)},async loadEgg(r){const i=t.e(1523).then(t.bind(t,3075)),n=await fetch("https://wokwi.com/api/external/hatchery?egg=".concat(encodeURIComponent(r))),a=await n.arrayBuffer(),s=(await i).inflate(a);for(const r of function*(e){const r=new h.F(e);for(;r.remaining>512;){const e=r.readChars(100),t=c(r.readChars(8)),i=c(r.readChars(8)),n=c(r.readChars(8)),a=c(r.readChars(12)),s=c(r.readChars(12)),o=c(r.readChars(8)),d=r.readChars(1),l=r.readChars(100),u=r.readChars(6),h=r.readChars(2),m="ustar"===u&&"00"===h,g=r.readChars(32),f=r.readChars(32),p=r.readChars(8),y=r.readChars(8),b=r.readChars(155);if(r.skip(12),!e&&!a&&!b)continue;const v=r.readBytes(a);a%512!=0&&r.skip(512-a%512),yield{name:m&&b?"".concat(b,"/").concat(e):e,mode:t,owner:i,group:n,size:a,lastModified:s,checksum:o,type:d,linkName:l,ownerName:m?g:"",groupName:m?f:"",devMajor:m?p:"",devMinor:m?y:"",data:v}}}(s)){const t="app/"+r.name.split("/").slice(1).join("/");if(t.endsWith(".png")||t.endsWith(".mpy"))e.addBinaryFile(t,r.data);else{const i=(new TextDecoder).decode(r.data);e.files.find((e=>e.name===t))?e.updateFile(t,i):e.addFile(t,i)}}}})))},49733:(e,r,t)=>{t.d(r,{Vr:()=>n,jM:()=>i});t(52212),t(22492);const i={"AccelStepper.h":"AccelStepper","Adafruit_GFX.h":"Adafruit GFX Library","Adafruit_INA219.h":"Adafruit INA219","Adafruit_LEDBackpack.h":"Adafruit LED Backpack Library","Adafruit_MPU6050.h":"Adafruit MPU6050","Adafruit_NeoMatrix.h":"Adafruit NeoMatrix","Adafruit_NeoPixel.h":"Adafruit NeoPixel","Adafruit_SoftServo.h":"Adafruit SoftServo","Adafruit_ST7789.h":"Adafruit ST7735 and ST7789 Library","Adafruit_ST7735.h":"Adafruit ST7735 and ST7789 Library","Adafruit_ILI9341.h":"Adafruit ILI9341","Adafruit_Sensor.h":"Adafruit Unified Sensor","Adafruit_SSD1306.h":"Adafruit SSD1306","ArduinoJson.h":"ArduinoJson","BasicLinearAlgebra.h":"BasicLinearAlgebra","basicMPU6050.h":"basicMPU6050","blinker.h":"LC_baseTools","Bounce2.h":"Bounce2","Button.h":"Button","DallasTemperature.h":"DallasTemperature","dht.h":"DHTlib","DHT.h":"DHT sensor library","DHT_U.h":"DHT sensor library","DHTesp.h":"DHT sensor library for ESPx","DS3231.h":"DS3231","EEPROM.h":"EEPROM","Encoder.h":"Encoder","FastLED.h":"FastLED","FastLED_NeoMatrix.h":"FastLED NeoMatrix","FixedPoints.h":"FixedPoints","Geometry.h":"Geometry","I2Cdev.h":"MPU6050","idlers.h":"LC_baseTools","IRremote.h":"IRremote","IRremoteInt.h":"IRremote","Key.h":"Keypad","Keypad.h":"Keypad","lcdgfx.h":"lcdgfx","LedControl.h":"LedControl","lilParser.h":"LC_lilParser","LiquidCrystal.h":"LiquidCrystal","LiquidCrystal_I2C.h":"LiquidCrystal I2C","LiquidMenu.h":"LiquidMenu","MD_MAX72xx.h":"MD_MAX72XX","MD_Parola.h":"MD_Parola","mechButton.h":"LC_baseTools","Midier.h":"Midier","MPU6050.h":"MPU6050","MultiStepper.h":"AccelStepper","OneButton.h":"OneButton","OneWire.h":"OneWire","qrcode.h":"QRCode","PID_v1.h":"PID","pitches.h":"PlayRtttl","PlayRtttl.h":"PlayRtttl","protothreads.h":"Protothreads","pt.h":"Protothreads","RTClib.h":"RTClib","runningAvg.h":"LC_baseTools","SD.h":"SD","SdFat.h":"SdFat","Segment.h":"Segment","Servo.h":"Servo","ServoEasing.h":"ServoEasing","SevSeg.h":"SevSeg","ShiftDisplay.h":"ShiftDisplay","SimpleDHT.h":"SimpleDHT","SimpleTimer.h":"SimpleTimer","SoftwareSerial.h":"SoftwareSerial","SPI.h":"SPI","ssd1306.h":"ssd1306","SSD1306Ascii.h":"SSD1306Ascii","SSD1306AsciiWire.h":"SSD1306Ascii","SSD1306init.h":"SSD1306Ascii","Stepper.h":"Stepper","Talkie.h":"Talkie","TaskScheduler.h":"TaskScheduler","TimeLib.h":"Time","timeObj.h":"LC_baseTools","TimerOne.h":"TimerOne","Tiny4kOLED.h":"Tiny4kOLED","TinyDebug.h":"TinyDebug","TinyWireM.h":"TinyWireM","TM1637TinyDisplay.h":"TM1637TinyDisplay","U8glib.h":"U8glib","U8g2lib.h":"U8g2","U8x8lib.h":"U8g2","Ultrasonic.h":"Ultrasonic","VarSpeedServo.h":"VarSpeedServo","WiFiNINA.h":"WiFiNINA","Wire.h":"Wire"};function n(e){const r=e.matchAll(/(^|\n)\s*#include\s*[<"]([^.]+\.h)[">]/g);return Array.from(r).map((e=>e[2]))}},14500:(e,r,t)=>{t.d(r,{V_:()=>d,gH:()=>l,s9:()=>o});var i=t(39227);function n(e){const r=/(\n|^)(\/sketch\/[^:/]+\.S):(\d+): (Warning|Error): (.+)(\s*\n|$)/g,t=[];let i=r.exec(e);for(;i;)t.push({filename:i[2],line:parseInt(i[3],10),type:i[4].toLowerCase(),text:i[5],column:1,tokenLength:999,startIndex:i.index,endIndex:i.index+i[0].length}),r.lastIndex--,i=r.exec(e);return t}const a="/sketch/",s="sketch.ino";function o(e,r){return e.split(a+s).join(r)}function d(e){const r=[...(0,i.parseString)(e),...n(e)].slice(0,500),t={};let o=null;t[s]=[],r.sort(((e,r)=>e.startIndex==r.startIndex?"note"==e.type?1:-1:e.startIndex-r.startIndex));let d="";for(const i of r){var l;const{filename:r,line:n,column:c,tokenLength:m,text:g,type:f,startIndex:p,endIndex:y}=i;var u;let b=e.substring(null!==(u=null==o?void 0:o.endIndex)&&void 0!==u?u:0,p);const v=/\r?\n?.+: In function '.+':\s*$/.exec(b);var h;let S=null!==(h=null==v||null===(l=v[0])||void 0===l?void 0:l.replace(/^\s*/g,""))&&void 0!==h?h:"";if(v&&(b=b.substring(0,v.index)),o?o.message+=b:d=b,"note"===f&&o&&o.startLineNumber===n&&o.startColumn===c)o.message+="\n"+g,o.endIndex=y;else if(r.startsWith(a)){const e=r.substring(a.length);o={type:f,startLineNumber:n,endLineNumber:n,startColumn:c,endColumn:c+(m||1),message:S+g,startIndex:p,endIndex:y},t[e]||(t[e]=[]),t[e].push(o)}else{const e=r.replace(/\/arduino\/hardware\/avr\/[0-9.]+\/cores/g,"");t[s].push({type:f,startLineNumber:1,endLineNumber:1,startColumn:1,endColumn:1,message:"".concat(e,":").concat(n,": ").concat(S+g),startIndex:p,endIndex:y})}}return o&&(o.message+=e.substr(o.endIndex).replace(/Error during build: exit status 1/,"").replace(/\s+$/,"")),{errors:t,remainingOutput:d}}function l(e){const r=e.replace(/.+\n.+\n[ \t]*#\s*pragma message "FastLED version 3\.\d+\.\d+".*\n.+/,"").trim();return"Error during build: exit status 1"===r?"":r}},67319:(e,r,t)=>{function*i(e){for(const r of e.split("\n")){const e=r.trim();e.length&&"#"!==e[0]&&(yield e)}}t.d(r,{h:()=>i,r:()=>n});const n={"Adafruit_NeoPixel.h":"Adafruit NeoPixel","Adafruit_GFX.h":"Adafruit GFX Library","DHT.h":"DHT sensor library","DHT_U.h":"DHT sensor library","FastLED.h":"FastLED","Key.h":"Keypad","Keypad.h":"Keypad","LiquidCrystal.h":"LiquidCrystal","LiquidCrystal_I2C.h":"LiquidCrystal I2C","MD_Parola.h":"MD_Parola","RTClib.h":"RTClib","SD.h":"SD","Servo.h":"Servo","SevSeg.h":"SevSeg","U8glib.h":"U8glib"}},72909:(e,r,t)=>{t.d(r,{z:()=>i});const i={atmega328p:{arch:"avr",family:"avr"},atmega2560:{arch:"avr",family:"avr"},attiny85:{arch:"avr",family:"avr"},esp32:{arch:"xtensa",family:"esp32"},"esp32-s2":{arch:"xtensa",family:"esp32"},"esp32-s3":{arch:"riscv",family:"esp32"},"esp32-c3":{arch:"riscv",family:"esp32"},"esp32-c6":{arch:"riscv",family:"esp32"},"esp32-h2":{arch:"riscv",family:"esp32"},"esp32-p4":{arch:"riscv",family:"esp32"},rp2040:{arch:"arm",family:"rp2"},stm32c031c6:{arch:"arm",family:"stm32"},stm32f103c8:{arch:"arm",family:"stm32"},stm32l031k6:{arch:"arm",family:"stm32"},stm32l432kc:{arch:"arm",family:"stm32"}}},9940:(e,r,t)=>{t.d(r,{F:()=>n});var i=t(50467);class n{readUint8(){return this.buf[this.index++]}readUint16(){const{index:e}=this,r=this.buf[e],t=this.buf[e+1];return this.index+=2,t<<8|r}readUint32(){const{index:e}=this,r=this.buf[e],t=this.buf[e+1],i=this.buf[e+2],n=this.buf[e+3];return this.index+=4,(n<<24|i<<16|t<<8|r)>>>0}readInt32(){return 0|this.readUint32()}readBytes(e){const r=this.buf.subarray(this.index,this.index+e);return this.index+=e,r}readChars(e){let r=this.readBytes(e);const t=r.indexOf(0);return t>=0&&(r=r.subarray(0,t)),this.decoder.decode(r)}readNullTerminated(){let e=this.buf.indexOf(0,this.index);e<0&&(e=this.buf.length);const r=this.decoder.decode(this.buf.subarray(this.index,e));return this.index=e+1,r}skip(e){this.index+=e}get currentOffset(){return this.index}get remaining(){const e=this.buf.length-this.index;return e>0?e:0}constructor(e){(0,i._)(this,"buf",void 0),(0,i._)(this,"index",void 0),(0,i._)(this,"decoder",void 0),this.buf=e,this.index=0,this.decoder=new TextDecoder}}}}]);